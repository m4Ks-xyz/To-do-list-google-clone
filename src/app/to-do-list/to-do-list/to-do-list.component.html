@for (list of toDoLists(); track list.id) {
	<div class="my-list">
		<div class="my-list__header">
			<h2 class="my-list__title">{{ list.title }}</h2>
			<div class="my-list__group"></div>
			<button mat-icon-button [matMenuTriggerFor]="menu" aria-label="Menu ">
				<mat-icon>more_vert</mat-icon>
			</button>
			<mat-menu #menu="matMenu">
				<button (click)="onRemoveList(list.id)" mat-menu-item>
					<mat-icon>delete</mat-icon>
					<span>Usuń liste</span>
				</button>
				<button (click)="openEditListDialog(list)" mat-menu-item>
					<mat-icon>edit_square</mat-icon>
					<span>Zmień nazwe listy</span>
				</button>
			</mat-menu>
			<button
				(click)="openDialogNewTask(list.id)"
				class="my-list__button"
				S
				mat-menu-item
			>
				<mat-icon>add_task</mat-icon>
				<span>Dodaj zadanie</span>
			</button>
		</div>

		<div class="task-list">
			<div class="task-list__items">
				@for (task of list.tasks; track task.id) {
					<div
						[class]="
							task.complete
								? 'task-list__item ' + 'task-list__item--completed'
								: 'task-list__item'
						"
					>
						<div class="task-list__group">
							@if (task.date) {
								<p class="task-list__item__date">
									<mat-icon
										aria-hidden="false"
										aria-label="Calendar icon"
										fontIcon="event"
									></mat-icon>
									{{ task.date | date: "MMM d, y" }}
								</p>
							}

							<h3
								[class]="
									task.complete
										? 'task-list__item__title ' +
											'task-list__item__title--completed'
										: 'task-list__item__title'
								"
							>
								{{ task.title }}
							</h3>
							<p class="task-list__item__description">
								{{ task.description }}
							</p>
						</div>

						<div class="task-list__group task-list__group--icons">
							<button
								(click)="addAsComplete(list.id, task)"
								class="task-list__group__button"
								mat-fab
								aria-label="Favorite icon"
							>
								<mat-icon class="task-list__group__button__icon">
									@if (task.complete) {
										undo
									} @else {
										check
									}
								</mat-icon>
							</button>
							<button
								class="task-list__group__button"
								mat-fab
								[matMenuTriggerFor]="menu"
								aria-label="Menu "
							>
								<mat-icon class="task-list__group__button__icon"
									>more_vert</mat-icon
								>
							</button>
							<mat-menu #menu="matMenu">
								<button
									(click)="openDialogEditTask(list.id, task)"
									mat-menu-item
								>
									<mat-icon>edit_square</mat-icon>
									<span>Edytuj</span>
								</button>
								<button (click)="onRemoveTask(list.id, task.id)" mat-menu-item>
									<mat-icon>delete</mat-icon>
									<span>Usuń</span>
								</button>
							</mat-menu>
							<button
								(click)="addAsFavorite(list.id, task)"
								[class]="
									task.favorite
										? 'task-list__group__button ' +
											'task-list__group__button--favorite'
										: 'task-list__group__button'
								"
								mat-fab
								aria-label="Favorite icon"
							>
								<mat-icon class="task-list__group__button__icon">
									@if (task.favorite) {
										star
									} @else {
										star_border
									}
								</mat-icon>
							</button>
						</div>
					</div>
				} @empty {
					<div class="task-list__empty-state">
						<img
							class="task-list__empty-state__img"
							src="empty-tasks-dark.png"
							alt="Grafika listy zdań"
						/>
						<h3 class="task-list__empty-state__title">
							Nie ma jeszcze żadnych zadań
						</h3>
						<p class="task-list__empty-state__description">
							Dodaj swoje zadania do wykonania już teraz
						</p>
					</div>
				}
			</div>
		</div>
	</div>
}
